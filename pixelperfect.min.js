(function(){var e=(e={})=>{if(!window||window.isPPLoaded)return;let t=[320,768,1240],n={ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0],ArrowUp:[0,-1]};function r(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey}function i(e,t){return e-t}class a{constructor(){let{breakpoints:n=null,ext:r=`jpg`,folder:a=`pixelperfect`,page:o=null,selector:s=`body`}=window.pixelperfect||e;if(this._isPP=!!Number(localStorage.getItem(`pp`)||0),this._isInvert=!!Number(localStorage.getItem(`ppInvert`)||1),this._breakpoints=n?Array.from(new Set(n)).sort(i):t,this._currentBreakpoint=0,this._folder=a,this._ext=r,this._PPElement=document.querySelector(s),o)this._page=o;else{let[,e=``]=window.location.pathname.match(/^\/?(.*?)(\.html?)?$/)||[];this._page=e.replace(/\/$/,``)||`index`}this._offsets=JSON.parse(localStorage.getItem(`ppOffsets`)||``)||{},this._offsets[this._page]||(this._offsets[this._page]={});for(let e of this._breakpoints)this._offsets[this._page][e]||(this._offsets[this._page][e]=[0,0]);this._saveOffsets(),this._keydownHandler=this._keydownHandler.bind(this),this._changeScreenMode=this._changeScreenMode.bind(this),this._changeScreenMode(),this._setOffsets(),this._managePP(),this._manageInvert(),window.addEventListener(`resize`,this._changeScreenMode),document.addEventListener(`keydown`,this._keydownHandler)}_changeScreenMode(){let{clientWidth:e}=this._PPElement,t=0;for(let n of this._breakpoints){if(e<n)continue;t=n}this._currentBreakpoint!==t&&(this._currentBreakpoint=t,this._setBgProperty(this._currentBreakpoint),this._setOffsets())}_keydownHandler(e){if(!(document.activeElement!==document.body||r(e))){if(e.code===`KeyP`)e.preventDefault(),this._isPP=!this._isPP,this._managePP();else if(this._isPP&&e.code===`KeyI`)e.preventDefault(),this._isInvert=!this._isInvert,this._manageInvert();else if(this._isPP&&e.code===`KeyR`)e.preventDefault(),localStorage.removeItem(`ppOffsets`),window.location.reload();else if(this._isPP){let t=n[e.code];if(!t)return;e.preventDefault(),this._movePP(...t)}}}_manageInvert(){this._PPElement.style.setProperty(`--pp-filter`,this._isInvert?`invert(1)`:`none`),localStorage.setItem(`ppInvert`,`${Number(this._isInvert)}`)}_managePP(){getComputedStyle(this._PPElement).position===`fixed`?(this._scrollableElement=document.documentElement,this._scrollTop=this._PPElement.scrollTop):(this._scrollableElement=this._PPElement,this._scrollTop=document.documentElement.scrollTop);let{scrollBehavior:e}=getComputedStyle(this._PPElement);this._PPElement.classList.toggle(`pixelperfect`,this._isPP),this._PPElement.style.scrollBehavior=`auto`,this._scrollableElement.scroll(0,this._scrollTop),this._PPElement.style.scrollBehavior=e,localStorage.setItem(`pp`,`${Number(this._isPP)}`)}_movePP(e,t){this._offsets[this._page][this._currentBreakpoint][0]+=e,this._offsets[this._page][this._currentBreakpoint][1]+=t,this._saveOffsets(),this._setOffsets()}_saveOffsets(){localStorage.setItem(`ppOffsets`,JSON.stringify(this._offsets))}_setBgProperty(e=0){let t=e?`url("${this._folder}/${this._page}-${e}.${this._ext}")`:`none`;this._PPElement.style.setProperty(`--pp-img`,t)}_setOffsets(){let[e=0,t=0]=this._offsets[this._page][this._currentBreakpoint]||[];this._PPElement.style.setProperty(`--pp-offset-x`,`${e}px`),this._PPElement.style.setProperty(`--pp-offset-y`,`${t}px`)}}document.head.insertAdjacentHTML(`beforeend`,`<style>.pixelperfect{position:relative;height:auto;overflow-x:hidden;overflow-y:auto}.pixelperfect::after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1000000;background-image:var(--pp-img);background-repeat:no-repeat;background-position:calc(50% + var(--pp-offset-x)) var(--pp-offset-y);opacity:.5;filter:var(--pp-filter);pointer-events:none}</style>`),new a,window.isPPLoaded=!0};e()})();